<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title></title>

<!-- Bootstrap -->
<link href="assets/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="assets/css/st-declare.css">
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/st-declare.js"></script>
<script type="text/javascript">
	var phoneWidth = parseInt(window.screen.width);
	var phoneScale = phoneWidth / 375;
	var ua = navigator.userAgent;
	if (/Android (\d+\.\d+)/.test(ua)) {
		var version = parseFloat(RegExp.$1);
		if (version > 2.3) {
			document
					.write('<meta name="viewport" content="width=375, minimum-scale = ' + phoneScale + ', maximum-scale = ' + phoneScale + ', target-densitydpi=device-dpi">');
		} else {
			document
					.write('<meta name="viewport" content="width=375, target-densitydpi=device-dpi">');
		}
	} else {
		document
				.write('<meta name="viewport" content="width=375, user-scalable=no, target-densitydpi=device-dpi">');
	}
</script>
</head>
<body>
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<a href="st-detail4.html">
				<div class="de-left">
					<img src="assets/i/b-1.png" alt="">
				</div>
			</a> <span>积分申报</span>
		</div>
	</nav>
	<div class="re-nav top">
		<!-- Tab panes -->
		<div class="tab-content">
			<div role="tabpanel" class="tab-pane active" id="home">
				<div class="de-list">
					<ul id="content">
						<li>
							<div class="list-left">项目名称：</div>
							<div class="list-right">
								<input id="projectName" type="text" name="" value="项目名称项目名称项目名称">
							</div>
						</li>
						<li>
							<div class="list-left">项目类别：</div>
							<div class="list-right">
								<input type="text" name="" id="sui" value="111>222>333">
								<div id="div1" class="div1 qq">
									<ul class="clearfix" id="one">
										<li>111</li>
										<li>222</li>
										<li>333</li>
										<li>444</li>
									</ul>
								</div>
							</div>
							<div class="clear"></div>
						</li>
						<li>
							<div class="list-left">所属学院：</div>
							<div class="list-right agray" id="college">信息工程学院</div>
						</li>
						<li class="list-other">
							<div>项目详情:</div> <textarea id="content" class="form-control"
								rows="3">项目详情项目详情项目详情项目详情</textarea>
						</li>
						<li class="list-other">
							<div class="de-text">上传佐证:</div> <img src="assets/i/b-2.png"
							alt="">
						</li>
					</ul>
				</div>

				<nav class="navbar navbar-default navbar-fixed-bottom">
					<a href="javascript:;" id="submit">
						<div class="container nav-bot" onclick="sub()">确认提交</div>
					</a>
				</nav>

			</div>
		</div>
	</div>

	<script>
		$(function() {
			$("#sui").click(
					function() {
						$("#div1").toggle();
// 						$("#div1").show();
						$.ajax({
							type : "GET", // 提交方式
							url : "/common/getAllProjectCategory",// 路径
							success : function(result) {// 返回数据根据结果进行相应的处理
								addHtmls(result);
							}
						});

						function addHtmls(result) {
							var htmls = "<ul class='clearfix' id='one'>";
							for (var i = 0; i < result.content.length; i++) {
								var level=parseInt(result.content[i].field1)+1;
								htmls += "<li onclick='getId("
										+ result.content[i].id + ","
										+ result.content[i].categoryName+","
										+ level+")'>"
										+ result.content[i].categoryName
										+ "</li>";
							}
							htmls+="</ul>";
							$("#div1").text("");
							$("#div1").append(htmls);
						}
					});
		})

		function getId(fatherId, categroyName, level,isLeaf) {
			if (isLeaf === 1) {
				var texts = $("#sui").val() + categroyName;
				$("#sui").val(texts);
				$(".div1").css("display", "none");
			} else {

				var texts = $("#sui").val() + categroyName;
				$("#sui").val(texts + "/");
				$.ajax({
					type : "GET", // 提交方式
					url : "/common/getCategoryNode",// 路径
					data : "fatherId=" + fatherId+"&level="+level,
					success : function(result) {// 返回数据根据结果进行相应的处理
						var htmlss = "<ul class='clearfix' id='one'>";
						for (var i = 0; i < result.content.length; i++) {
							var level=parseInt(result.content[i].level)+1;
							htmlss += "<li onclick='getId("
									+ result.content[i].id + ","
									+ result.content[i].nodeContent + ","
									+ level + ","
									+ result.content[i].isLeaf + ")'>"
									+ result.content[i].nodeContent + "</li>";
						}
						htmlss+="</ul>";
						$("#div1").hide();
						$("#div1").text("");
						$("#div1").append(htmlss);
						$("#div1").css("display", "block");
						$("#div1").show();
// 						$("#div1").toggle();
					}
				});
			}
		}
	</script>

</body>
</html>